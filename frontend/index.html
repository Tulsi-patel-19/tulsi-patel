<!-- auth.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login / Sign Up â€” Career Advisor</title>
<style>
  /* compact styles for the two-column login page */
  :root{--green:#2563eb}
  *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial,sans-serif}
  body{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#f2f5f9;padding:20px}
  .container{width:900px;max-width:100%;height:560px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.12);display:flex;overflow:hidden}
  .left{flex:1;background:url("https://images.pexels.com/photos/4144222/pexels-photo-4144222.jpeg") center/cover no-repeat;position:relative}
  .left::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg, rgba(2,6,23,0.18), rgba(2,6,23,0.15));}
  .right{flex:1;padding:36px;display:flex;flex-direction:column;justify-content:center}
  .tabs{display:flex;gap:10px;margin-bottom:18px}
  .tab{flex:1;padding:12px;border-radius:8px;border:none;background:transparent;cursor:pointer;font-weight:600;font-size:16px;border-bottom:3px solid transparent;transition:.18s}
  .tab.active{border-bottom-color:var(--green);color:var(--green)}
  h2{margin:6px 0 16px;color:#222;font-size:20px}
  form{display:block}
  input{width:100%;padding:12px;border-radius:8px;border:1px solid #d0d7df;margin:8px 0;font-size:15px}
  .options{display:flex;justify-content:space-between;align-items:center;font-size:14px;margin-top:6px}
  .btn{width:100%;padding:12px;border-radius:8px;border:none;background:var(--green);color:#fff;font-weight:700;margin-top:14px;cursor:pointer}
  .google-btn{display:flex;align-items:center;justify-content:center;gap:10px;padding:10px;border-radius:8px;border:1px solid #d0d7df;background:#fff;margin-top:12px;cursor:pointer}
  .msg{margin-top:10px;color:#b91c1c;font-size:14px;min-height:18px}
  .small{font-size:13px;color:#666;margin-top:8px}
</style>
</head>
<body>
  <div class="container">
    <div class="left"></div>

    <div class="right">
      <div class="tabs">
        <button id="loginTab" class="tab active">Login</button>
        <button id="signupTab" class="tab">Sign Up</button>
      </div>

      <!-- LOGIN -->
      <div id="loginBox">
        <h2>Welcome Back ðŸ‘‹</h2>
        <form id="loginForm">
          <input id="loginEmail" type="email" placeholder="Email address" required />
          <input id="loginPass" type="password" placeholder="Password" required />
          <div class="options">
            <label><input id="remember" type="checkbox"> Remember</label>
            <a href="#" id="forgotLink">Forgot password?</a>
          </div>
          <button class="btn" type="submit">Login</button>
        </form>

        <div style="text-align:center" class="small">or</div>
        <button id="googleLogin" class="google-btn">
          <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="G" style="width:20px">
          Continue with Google
        </button>

        <div class="msg" id="loginMsg"></div>
      </div>

      <!-- SIGNUP -->
      <div id="signupBox" style="display:none">
        <h2>Create an account ðŸŽ“</h2>
        <form id="signupForm">
          <input id="signupName" type="text" placeholder="Full name" required />
          <input id="signupEmail" type="email" placeholder="Email address" required />
          <input id="signupPass" type="password" placeholder="Password (6+ chars)" required />
          <input id="signupPass2" type="password" placeholder="Confirm password" required />
          <button class="btn" type="submit">Sign Up</button>
        </form>

        <div style="text-align:center" class="small">or</div>
        <button id="googleSignup" class="google-btn">
          <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="G" style="width:20px">
          Continue with Google
        </button>

        <div class="msg" id="signupMsg"></div>
      </div>
    </div>
  </div>

  <!-- Firebase + Auth logic (modular SDK via CDN modules) -->
  <script type="module">
    // === 1) Replace this firebaseConfig with YOUR project's config from the Firebase Console
    //    (Go to Project settings â†’ Your apps â†’ Firebase SDK snippet)
    const firebaseConfig = {
      apiKey: "REPLACE_WITH_YOUR_apiKey",
      authDomain: "REPLACE_WITH_YOUR_authDomain",
      projectId: "REPLACE_WITH_YOUR_projectId",
      appId: "REPLACE_WITH_YOUR_appId"
    };

    // === 2) Import Firebase (modular SDK) from CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      signInWithPopup,
      GoogleAuthProvider,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // UI helpers
    const loginTab = document.getElementById('loginTab');
    const signupTab = document.getElementById('signupTab');
    const loginBox = document.getElementById('loginBox');
    const signupBox = document.getElementById('signupBox');
    const loginMsg = document.getElementById('loginMsg');
    const signupMsg = document.getElementById('signupMsg');

    loginTab.addEventListener('click', ()=>{ loginTab.classList.add('active'); signupTab.classList.remove('active'); loginBox.style.display='block'; signupBox.style.display='none'; });
    signupTab.addEventListener('click', ()=>{ signupTab.classList.add('active'); loginTab.classList.remove('active'); signupBox.style.display='block'; loginBox.style.display='none'; });

    // If already signed in -> go straight to home
    onAuthStateChanged(auth, user => {
      if(user) {
        // Logged in â€” redirect to home (index.html)
        window.location.href = 'index.html';
      }
    });

    // LOGIN
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      loginMsg.textContent = '';
      const email = document.getElementById('loginEmail').value;
      const pass = document.getElementById('loginPass').value;
      try {
        await signInWithEmailAndPassword(auth, email, pass);
        // onAuthStateChanged will redirect
      } catch (err) {
        loginMsg.textContent = err.message;
      }
    });

    // SIGNUP
    document.getElementById('signupForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      signupMsg.textContent = '';
      const name = document.getElementById('signupName').value.trim();
      const email = document.getElementById('signupEmail').value;
      const pass = document.getElementById('signupPass').value;
      const pass2 = document.getElementById('signupPass2').value;
      if(pass !== pass2){ signupMsg.textContent = "Passwords do not match"; return; }
      try {
        await createUserWithEmailAndPassword(auth, email, pass);
        // optionally update profile with displayName here (requires updateProfile)
        // onAuthStateChanged will redirect
      } catch (err) {
        signupMsg.textContent = err.message;
      }
    });

    // Google (shared handler for both login & signup)
    async function signInWithGoogle(){
      try {
        await signInWithPopup(auth, provider);
        // onAuthStateChanged will redirect
      } catch (err) {
        // popup blocked or other errors
        loginMsg.textContent = err.message;
      }
    }
    document.getElementById('googleLogin').addEventListener('click', signInWithGoogle);
    document.getElementById('googleSignup').addEventListener('click', signInWithGoogle);

    // Forgot password link will just open a mailto for now (you can add sendPasswordResetEmail later)
    document.getElementById('forgotLink').addEventListener('click', (e)=>{ e.preventDefault(); alert('We will add password reset flow later.'); });

  </script>
</body>
</html>
